{
  "comments": [
    {
      "key": {
        "uuid": "ffb9cba7_908215c8",
        "filename": "healthd/healthd_board_msm.cpp",
        "patchSetId": 1
      },
      "lineNbr": 137,
      "author": {
        "id": 2936
      },
      "writtenOn": "2016-02-23T08:18:48Z",
      "side": 1,
      "message": "Indentation is off here, you could also do a poll on the fd instead.",
      "revId": "4d20c4f285138d4cdab6ce972dca2c1de4b8735b",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ffb9cba7_7069a123",
        "filename": "healthd/healthd_board_msm.cpp",
        "patchSetId": 1
      },
      "lineNbr": 141,
      "author": {
        "id": 2936
      },
      "writtenOn": "2016-02-23T08:18:48Z",
      "side": 1,
      "message": "You can merge the close and return here with the close and return at line 145.",
      "revId": "4d20c4f285138d4cdab6ce972dca2c1de4b8735b",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ffb9cba7_d0788df9",
        "filename": "healthd/healthd_board_msm.cpp",
        "patchSetId": 1
      },
      "lineNbr": 158,
      "author": {
        "id": 2936
      },
      "writtenOn": "2016-02-23T08:18:48Z",
      "side": 1,
      "message": "We\u0027re actually requiring timerfd offmode charging devices to opt-in to enabling off mode charging by setting: \n\nBOARD_HAVE_TIMERFD_POWEROFF_ALARM :\u003d true\n\nBecause of that, you don\u0027t need to try opening dev/alarm at runtime, we know at compile time whether the open call will work or not.",
      "revId": "4d20c4f285138d4cdab6ce972dca2c1de4b8735b",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ffb9cba7_63ab19d6",
        "filename": "healthd/healthd_board_msm.cpp",
        "patchSetId": 1
      },
      "lineNbr": 158,
      "author": {
        "id": 13956
      },
      "writtenOn": "2016-02-23T23:39:03Z",
      "side": 1,
      "message": "No, there is no need for timerfd to support poweroff alarm in order for this feature to works. It just use timerfd to wait for next alarm (while the device is awake in charging mode) and trigger a reboot. BOARD_HAVE_TIMERFD_POWEROFF_ALARM feature is not needed.",
      "parentUuid": "ffb9cba7_d0788df9",
      "revId": "4d20c4f285138d4cdab6ce972dca2c1de4b8735b",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ffb9cba7_a3d03152",
        "filename": "healthd/healthd_board_msm.cpp",
        "patchSetId": 1
      },
      "lineNbr": 158,
      "author": {
        "id": 2936
      },
      "writtenOn": "2016-02-24T00:15:26Z",
      "side": 1,
      "message": "Isn\u0027t that inconsistent behavior? If you\u0027re in charge mode power off alarms work, but if you are actually off, power off alarms don\u0027t work?",
      "parentUuid": "ffb9cba7_63ab19d6",
      "revId": "4d20c4f285138d4cdab6ce972dca2c1de4b8735b",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ffb9cba7_23bc4104",
        "filename": "healthd/healthd_board_msm.cpp",
        "patchSetId": 1
      },
      "lineNbr": 158,
      "author": {
        "id": 13956
      },
      "writtenOn": "2016-02-24T00:31:24Z",
      "side": 1,
      "message": "It is behave like that from the beginning when using /dev/alarm.\nThe device may not be support power-off alarm, but /dev/alarm still alarms in charging mode.\nThis patch does not change that behavior.\n\nAnyway, if the hardware does not support power off alarms, nothing we can do. But sacrifice the alarm when in charging if device does not supports power off alarms ?  I don\u0027t think it is a good solution either.",
      "parentUuid": "ffb9cba7_a3d03152",
      "revId": "4d20c4f285138d4cdab6ce972dca2c1de4b8735b",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ffb9cba7_e33b8999",
        "filename": "healthd/healthd_board_msm.cpp",
        "patchSetId": 1
      },
      "lineNbr": 158,
      "author": {
        "id": 2936
      },
      "writtenOn": "2016-02-24T00:37:01Z",
      "side": 1,
      "message": "Wait, I just remembered that the system will check /dev/rtc0 first for any RTC alarms present. (See line 210) You can only ever execute this code if the device supports RTC power off alarms to begin with. In this case you might as well ifdef then, because this code is only ever meant for the power off alarm case.",
      "parentUuid": "ffb9cba7_23bc4104",
      "revId": "4d20c4f285138d4cdab6ce972dca2c1de4b8735b",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ffb9cba7_f07d91e7",
        "filename": "healthd/healthd_board_msm.cpp",
        "patchSetId": 1
      },
      "lineNbr": 226,
      "author": {
        "id": 2936
      },
      "writtenOn": "2016-02-23T08:18:48Z",
      "side": 1,
      "message": "You can ifdef alarm_set_reboot_time_and_wait for timerfd_set_reboot_time_and_wait here.",
      "revId": "4d20c4f285138d4cdab6ce972dca2c1de4b8735b",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71",
      "unresolved": false
    }
  ]
}